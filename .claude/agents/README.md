# Opportunity Advancer Agent - Quick Start

## What It Does

Mirrors your Notion AI Process 2.2: analyzes meeting notes and recommends 5 field updates to keep your pipeline moving.

## How to Use

### Basic Invocation

```
"Analyze opportunity [Name]"
```

or

```
"Update progress for [Opportunity Name]"
```

### What Happens

1. Agent searches Oportunidades database
2. Loads most recent Anotação (meeting notes)
3. Analyzes transcript/summary/notes
4. Generates 5 proposed fields:
   - Update Log (1 sentence, ≤10 words)
   - Next Action (specific, actionable)
   - Next Action Date (calculated from last meeting + 7 days)
   - Biz Funnel (detects stage advancement)
   - Status (In Progress / Waiting Feedback / Scheduled)
5. Shows you proposed updates
6. Waits for your approval
7. Updates Notion (only after you confirm)

### Example Session

```
You: "Analyze opportunity Projeto SiDi"

Agent: [Searches database]
Agent: [Loads meeting notes from 18/11]
Agent: [Analyzes transcript]

# Opportunity Update: Projeto SiDi

**Last Interaction:** 2025-11-18
**Current Stage:** Credibilidade → Oferta

## Proposed Updates
1. Update Log: 18/11: cliente solicitou proposta de pricing
2. Next Action: Enviar proposta comercial
3. Next Action Date: 2025-11-25
4. Biz Funnel: Oferta (Changed: yes - client asked for pricing)
5. Status: In Progress

**Apply these updates?** [Y/N]

You: Y

Agent: [Updates Notion]
Agent: ✅ Opportunity updated successfully!
```

## When to Use

- After client meetings (when you have new Anotações)
- When you want to compare Claude Code vs Notion AI output
- To update opportunities with Offline Notes (no formal meeting)

## Requirements

- Opportunity must exist in Oportunidades database
- Must have either:
  - At least 1 Anotação with content, OR
  - Offline Notes field populated

## Tips

**Use exact opportunity names:**
- ✅ "Projeto SiDi - Nova Plataforma"
- ❌ "projeto sidi" (may not find exact match)

**If multiple results:**
- Agent will show list and ask you to choose

**If no meeting data:**
- Agent will error: "No meeting data to process"
- Add Offline Notes or create Anotação first

## Compare with Notion AI

To validate the hybrid approach:

1. Pick 3-5 real opportunities
2. Run Claude Code agent: `"Analyze opportunity [Name]"`
3. Run Notion AI: `"Atualize o avanço da oportunidade [Nome]"`
4. Compare the 5 fields generated by each
5. Note differences and patterns

**Target:** >80% match between outputs

## Troubleshooting

**"Opportunity not found"**
- Check spelling (case-sensitive)
- Try full opportunity name
- Use Notion URL instead: `"Analyze opportunity https://notion.so/..."`

**"No meeting data to process"**
- Add content to Anotações or Offline Notes
- Verify Anotação has <transcript>, <summary>, or <notes> tags

**Agent suggests wrong Biz Funnel stage**
- You can reject the update
- Agent learns from corrections (future feature)
- For now: adjust manually

**Update failed**
- Check `.env` has valid NOTION_API_KEY
- Ensure MCP server is running (auto-loads with Claude Code)
- Verify user approved the write operation

## Configuration

**Agent file:** `.claude/agents/opportunity-advancer.md`

**Edit to adjust:**
- System instructions (SENSE/PLAN/ACT/REFLECT logic)
- Constraints (e.g., Update Log max length)
- Output format

**Skill file:** `.claude/skills/crm-data-model/SKILL.md`

**Edit to adjust:**
- Biz Funnel stages
- Advancement signals
- Status decision rules

## Next Steps

After validating this agent works (Phase 0 complete):
- **Phase 1:** Weekly Pipeline Digest agent
- **Phase 2:** Meeting Prep Briefer
- **Phase 3:** Follow-up Drafter
- **Phase 4:** Orchestration (agents working together)

---

For detailed implementation: See `docs/phase-0-lean-implementation.md`

For future architecture: See `docs/spar-architecture-future-reference.md`
